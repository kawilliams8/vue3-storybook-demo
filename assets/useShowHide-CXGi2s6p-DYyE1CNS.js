import{w as de,e as ce,f as X,g as fe}from"./iconify-BKBaadJz.js";import{O as he,h as U,G as ge,y as f,z as q,P as _e,Q as E,E as be,N as Pe,r as we,R as me,S as Ae}from"./iframe-UXHHx5Ek.js";const pe=(a,t)=>{const o=he();return U(()=>ge(a)||de(o||"",t))};var ye=Object.defineProperty,Te=(a,t,o)=>t in a?ye(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,_=(a,t,o)=>Te(a,typeof t!="symbol"?t+"":t,o);class N{constructor(t,o={}){if(_(this,"cancelable",!0),_(this,"componentId",null),_(this,"_defaultPrevented",!1),_(this,"eventType",""),_(this,"nativeEvent",null),_(this,"_preventDefault"),_(this,"relatedTarget",null),_(this,"target",null),!t)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,N.Defaults,o,{eventType:t}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(t){this._defaultPrevented=t}get preventDefault(){return this._preventDefault}set preventDefault(t){this._preventDefault=t}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class Ee extends N{constructor(t,o={}){super(t,o),_(this,"trigger",null),_(this,"ok"),Object.assign(this,N.Defaults,o,{eventType:t})}static get Defaults(){return{...super.Defaults,trigger:null,ok:void 0}}}const Y={name:"fade",enterActiveClass:"",enterFromClass:"showing",enterToClass:"",leaveActiveClass:"",leaveFromClass:"",leaveToClass:"showing",css:!0},Be=(a,t,o,x,R,u={transitionProps:{},showFn:()=>{},hideFn:()=>{}})=>{var G;let w=!1;const A=!!a.value&&!t.initialAnimation||t.visible||!1,h=f(A),L=f(A),F=f(A);let j=typeof a.value!="boolean";q(a,()=>{if(j=typeof a.value!="boolean",w){w=!1;return}a.value?P():m("modelValue",!0)});const g=f(A),T=f(!1),Z=U(()=>t.noAnimation||t.noFade||g.value||!1);let p=!1;_e(()=>{var e;if(p=!0,!t.show&&A){const n=s("show",{cancelable:!0});if(o("show",n),n.defaultPrevented){o("show-prevented",s("show-prevented"));return}g.value=!0,a.value||(w=!0,a.value=!0),L.value=!0,F.value=!0,y.value=!0,I.value=!0,D.value=!0,h.value=!0,(e=u.showFn)==null||e.call(u)}else(t.show||a.value&&t.initialAnimation)&&P()}),q(()=>t.visible,e=>{g.value=!0,E(()=>{e&&(y.value=!0),e?P():m("visible-prop",!0)})}),q(()=>t.show,e=>{e?P():m("show-prop",!0)}),ce(x,"bv-toggle",()=>{a.value=!a.value});const s=(e,n={})=>new Ee(e,{cancelable:!1,target:x?.value||null,relatedTarget:null,trigger:null,...n,componentId:R?.value});let c,b,v,d,K;const P=(e=!1)=>{if(h.value&&!b&&!d)return Promise.resolve(!0);if(K=e,h.value&&!b&&d)return d;d=new Promise(r=>{v=r});const n=s("show",{cancelable:!0});return o("show",n),n.defaultPrevented?(o("show-prevented",s("show-prevented")),y.value&&(y.value=!1),a.value&&!j&&(w=!0,E(()=>{a.value=!1})),v?.("show-prevented"),d):(b&&(clearTimeout(b),b=void 0),L.value=!0,F.value=!0,requestAnimationFrame(()=>{var r,l;if(g.value||t.delay===void 0){if(!p)return;c=void 0,h.value=!0,(r=u.showFn)==null||r.call(u),a.value||(w=!0,E(()=>{a.value=!0}));return}c=setTimeout(()=>{var i;p&&(c=void 0,h.value=!0,(i=u.showFn)==null||i.call(u),a.value||(w=!0,E(()=>{a.value=!0})))},typeof t.delay=="number"?t.delay:((l=t.delay)==null?void 0:l.show)||0)}),d)};let k;const m=(e,n)=>{var r;if(!h.value&&!c)return Promise.resolve("");d||(d=new Promise(H=>{v=H})),typeof e!="string"&&(e=void 0),k=e;const l=s("hide",{cancelable:!0,trigger:e}),i=s(e||"ignore",{cancelable:!0,trigger:e});return e==="backdrop"&&t.noCloseOnBackdrop||e==="esc"&&t.noCloseOnEsc?(o("hide-prevented",s("hide-prevented",{trigger:e})),v?.("hide-prevented"),d):(c&&(clearTimeout(c),c=void 0),e&&!n&&o(e,i),o("hide",l),l.defaultPrevented||i.defaultPrevented?(o("hide-prevented",s("hide-prevented",{trigger:e})),a.value||E(()=>{w=!0,a.value=!0}),v?.("hide-prevented"),d):(S.value=!1,c&&(clearTimeout(c),c=void 0,T.value||(L.value=!1),F.value=!1),b=setTimeout(()=>{var H;p&&(b=void 0,C.value=!0,h.value=!1,(H=u.hideFn)==null||H.call(u),a.value&&(w=!0,a.value=j?0:!1))},g.value?0:typeof t.delay=="number"?t.delay:((r=t.delay)==null?void 0:r.hide)||0),d))},V=X(e=>m(e),500),ee=X(()=>P(),500),Q=(e=!1)=>{const n=s("toggle",{cancelable:!0});return o("toggle",n),n.defaultPrevented?(o("toggle-prevented",s("toggle-prevented")),Promise.resolve("toggle-prevented")):h.value?m("toggle-function",!0):P(e)},$=()=>{const e=s("toggle",{cancelable:!0});if(o("toggle",e),e.defaultPrevented){o("toggle-prevented",s("toggle-prevented"));return}h.value?m("toggle-trigger",!0):P()},B=[],te=(e,n)=>{B.push({trigger:e,el:n}),n.addEventListener(e,$),J(n)},ne=(e,n,r=!0)=>{const l=B.findIndex(i=>i?.trigger===e&&i.el===n);l>-1&&(B.splice(l,1),n.removeEventListener(e,$),r&&(n.removeAttribute("aria-expanded"),n.classList.remove("collapsed"),n.classList.remove("not-collapsed")))},z=(G=be(fe,void 0))==null?void 0:G.register({id:R.value,toggle:Q,show:P,hide:m,value:we(h),registerTrigger:te,unregisterTrigger:ne,component:Pe()}),J=e=>{e.setAttribute("aria-expanded",a.value?"true":"false"),e.classList.toggle("collapsed",!a.value),e.classList.toggle("not-collapsed",!!a.value)};q(a,()=>{B.forEach(e=>{J(e.el)})}),q(R,(e,n)=>{z?.updateId(e,n)}),me(()=>{z?.unregister(),B.forEach(e=>{e.el.removeEventListener(e.trigger,$)})}),Ae(()=>{p=!1,clearTimeout(c),clearTimeout(b),c=void 0,b=void 0});const M=f(!1),W=()=>{t.lazy===!0&&(M.value=!0)},C=f(!1),O=f(A),y=f(A),ae=e=>{var n,r,l,i;(r=(n=u.transitionProps)==null?void 0:n.onBeforeEnter)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onBeforeEnter)==null||i.call(l,e),O.value=!0},le=e=>{var n,r,l,i;requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.value=!0})}),(r=(n=u.transitionProps)==null?void 0:n.onEnter)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onEnter)==null||i.call(l,e)},re=e=>{var n,r,l,i;W(),(r=(n=u.transitionProps)==null?void 0:n.onAfterEnter)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onAfterEnter)==null||i.call(l,e),g.value&&requestAnimationFrame(()=>{g.value=!1}),T.value&&(T.value=!1),requestAnimationFrame(()=>{S.value=!0,E(()=>{o("shown",s("shown",{cancelable:!1}))})}),K||(v?.(!0),d=void 0,v=void 0)},ie=e=>{var n,r,l,i;C.value||(C.value=!0),(r=(n=u.transitionProps)==null?void 0:n.onBeforeLeave)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onBeforeLeave)==null||i.call(l,e),S.value=!1},oe=e=>{var n,r,l,i;y.value=!1,(r=(n=u.transitionProps)==null?void 0:n.onLeave)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onLeave)==null||i.call(l,e)},ue=e=>{var n,r,l,i;o("hidden",s("hidden",{trigger:k,cancelable:!1})),(r=(n=u.transitionProps)==null?void 0:n.onAfterLeave)==null||r.call(n,e),(i=(l=t.transitionProps)==null?void 0:l.onAfterLeave)==null||i.call(l,e),C.value=!1,O.value=!1,g.value&&requestAnimationFrame(()=>{g.value=!1}),requestAnimationFrame(()=>{T.value||(L.value=!1)}),v?.(k||""),d=void 0,v=void 0,k=void 0},se=U(()=>T.value===!0||O.value===!0||t.lazy===!1||t.lazy===!0&&M.value===!0&&t.unmountLazy===!1),S=f(!1),I=f(!1),D=f(!1),ve={...u.transitionProps,onBeforeEnter:ae,onEnter:le,onAfterEnter:re,onBeforeLeave:ie,onLeave:oe,onAfterLeave:ue};return{showRef:h,renderRef:L,renderBackdropRef:F,isVisible:y,isActive:O,trapActive:S,show:P,hide:m,toggle:Q,throttleHide:V,throttleShow:ee,buildTriggerableEvent:s,computedNoAnimation:Z,localNoAnimation:g,localTemporaryHide:T,isLeaving:C,transitionProps:{...Y,...t.transitionProps,...ve},lazyLoadCompleted:M,markLazyLoadCompleted:W,contentShowing:se,backdropReady:D,backdropVisible:I,backdropTransitionProps:{...Y,onBeforeEnter:()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{I.value=!0})}),D.value=!1},onAfterEnter:()=>{D.value=!0},onBeforeLeave:()=>{I.value=!1},onAfterLeave:()=>{D.value=!1,requestAnimationFrame(()=>{F.value=!1})}}}};export{Be as a,pe as u};
